<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>is-app.top - Free Subdomain Service</title>
    <link rel="icon" type="image/png" href="./src/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#336fd0', 
                        bgDark: '#0b182f', 
                        cardDark: '#0e1d3a',
                        borderDark: '#1e2d4d',
                        textMain: '#ccd6f6',
                        textMuted: '#8892b0',
                    },
                    fontFamily: {
                        mono: ['JetBrains Mono', 'Fira Code', 'monospace'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #0b182f;
            color: #ccd6f6;
            font-family: 'JetBrains Mono', monospace;
        }
        .banner-container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto 1.5rem auto; 
            border: 2px solid #336fd0;
            background-color: #0b182f;
            box-shadow: 0 0 25px rgba(51, 111, 208, 0.15);
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .banner-image {
            width: 100%;
            height: auto;
            aspect-ratio: 1000 / 300;
            object-fit: cover;
            display: block;
        }
        .input-terminal {
            background: #0e1d3a;
            border: 1px solid #1e2d4d;
            outline: none;
        }
        .input-terminal:focus {
            border-color: #336fd0;
        }
        .link-brand {
            color: #336fd0;
            text-decoration: none;
        }
        .link-brand:hover {
            text-decoration: underline;
        }
        hr {
            border: 0;
            border-top: 1px solid #1e2d4d;
            margin: 1.5rem 0;
        }
    </style>
</head>
<body class="p-4 sm:p-6 max-w-4xl mx-auto"> 
    <header class="mb-8"> 
        <div class="banner-container">
            <img src="./src/banner.png" alt=".is-app.top" class="banner-image">
        </div>
        
        <p class="text-lg font-bold">Free, forever, and yours. Grab your '.is-app.top' today.</p>
        <div class="border-l-4 border-brand bg-cardDark p-3 mt-3 text-sm"> To register your own subdomain, visit the 
            <a href="https://github.com/is-app-top/register" class="link-brand font-bold">is-app-top/register</a> 
            repository on GitHub and follow the provided instructions.
        </div>
    </header>

    <section class="mb-8"> 
        <h2 class="text-brand font-bold text-xl mb-3">Check Subdomain Availability</h2>
        <div class="relative">
            <input type="text" id="domain-input" placeholder="e.g. william" 
                   onkeypress="handleKeyPress(event)"
                   class="w-full input-terminal p-3 rounded text-textMain placeholder-textMuted text-lg">
        </div>
        <div id="search-result" class="mt-2 h-6 text-sm font-medium transition-all duration-300 opacity-0"></div>
    </section>

    <hr>

    <section class="mb-8">
        <h2 class="text-brand font-bold text-xl mb-3">Important Links</h2>
        <ul class="space-y-1 list-disc list-inside text-brand"> 
            <li><a href="https://github.com/is-app-top/register#readme" class="link-brand">Documentation</a></li>
            <li><a href="./tos.html" class="link-brand">Terms of Service</a></li>
            <li><a href="https://github.com/is-app-top" class="link-brand">GitHub</a></li>
            <li><a href="mailto:contact@is-app.top" class="link-brand">Support Email</a></li>
        </ul>
    </section>

    <hr>

    <section class="mb-8">
        <h2 class="text-brand font-bold text-xl mb-3">Report Abuse</h2>
        <div class="border-l-2 border-brand/50 pl-4 py-1 text-sm">
            If you suspect that a subdomain is abusing the service, please 
            <a href="https://github.com/is-app-top/register/issues" class="link-brand">report it here</a>.
        </div>
    </section>

    <hr>

    <section class="mb-12"> 
        <h2 class="text-brand font-bold text-xl mb-3">Donations</h2>
        <div class="border-l-2 border-brand/50 pl-4 py-1 text-sm leading-relaxed">
            This project is a free service for developers and will stay that way.
            Please consider <a href="https://ko-fi.com/isapptop" class="link-brand">donating</a> to help us keep this service running forever!
        </div>
    </section>

    <hr>

    <footer class="text-xs text-textMuted pb-8"> 
        <p class="mb-1" id="copyright-text">© 2024 is-app.top - All Rights Reserved.</p>
        <p>A project by <a href="https://github.com/williebenner" class="link-brand">Willie Benner</a>.</p>
    </footer>

    <script>
        const currentYear = new Date().getFullYear();
        const copyrightElement = document.getElementById('copyright-text');
        if (currentYear > 2024) {
            copyrightElement.innerHTML = `© 2024 - ${currentYear} is-app.top - All Rights Reserved.`;
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                checkDomain();
            }
        }

        async function checkDomain() {
            const input = document.getElementById('domain-input');
            const resultDiv = document.getElementById('search-result');
            const domain = input.value.trim().toLowerCase();

            if (!domain) {
                showResult('Please enter a name.', 'text-red-400');
                return;
            }

            resultDiv.style.opacity = '1';
            resultDiv.className = 'mt-2 text-brand font-bold';
            resultDiv.innerHTML = '> checking availability...';
            
            const message = await checkDomainAvailability(domain);
            
            let colorClass = 'text-textMuted';
            if (message.includes('✅')) colorClass = 'text-green-400';
            else if (message.includes('❌')) colorClass = 'text-red-400';
            else if (message.includes('⚠️')) colorClass = 'text-yellow-400';

            showResult(message, colorClass);
        }

        async function checkDomainAvailability(name) { 
            const url = 'https://raw.githubusercontent.com/is-app-top/register/refs/heads/main/lists.txt';
            try { 
                const response = await fetch(url);
                if (!response.ok) throw new Error();
                const text = await response.text();
                const lines = text.split('\n');
                let status = null;

                for (const line of lines) {
                    const trimmedLine = line.trim();
                    if (!trimmedLine) continue;
                    const parts = trimmedLine.split(':');
                    if (parts.length >= 2) {
                        const key = parts[0].trim().replace(/['"]/g, '');
                        const value = parts[1].trim().replace(/['"]/g, '').replace(/,/g, '');
                        if (key.toLowerCase() === name.toLowerCase()) {
                            status = value;
                            break;
                        }
                    }
                }

                if (status === 'active') return "❌ Unavailable - already active.";
                if (status === 'pending') return "❌ Unavailable - pending registration.";
                return "✅ Available - You can register this domain!";
            } catch (error) { 
                return "⚠️ Error connecting to server.";
            } 
        }

        function showResult(message, colorClass) {
            const resultDiv = document.getElementById('search-result');
            resultDiv.className = `mt-2 text-sm font-bold ${colorClass}`;
            resultDiv.innerHTML = message;
            resultDiv.style.opacity = '1';
        }
    </script>
</body>
</html>


